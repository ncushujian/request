!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var o=function e(t){return new Promise((function(n,o){var u=function e(t,n){var o=JSON.parse(JSON.stringify(t));for(var u in n)"object"===r(n[u])&&o[u]?o[u]=e(o[u],n[u]):o[u]=n[u];return o}(e.defaults,t);e.before&&e.before(u);var i=u.type?u.type.toLocaleUpperCase():"GET",a="POST"===i,f=!1,c=u.timeout||15e3,l=new XMLHttpRequest,s=function(e){if(!e)return"";var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(u.data),d=u.url;!a&&(d+=(d.indexOf("?")>-1?"&":"?")+s),l.open(i,d,!0);var p=u.headers,y=!1;if(p)for(var b in y=p["Content-Type"]&&-1!==p["Content-Type"].indexOf("application/json"),p)l.setRequestHeader(b,p[b]);a&&!y&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.withCredentials&&(l.withCredentials=!0);var m=0;l.onreadystatechange=function(){if(4==l.readyState){var t=l.status;if(t>=200&&t<300||304==t){var r=l.responseText,u=JSON.parse(r);try{e.after&&e.after(u)}catch(e){o(e)}n(u)}else o(new Error("request error:"+t+" "+l.statusText));f=!0,m&&clearTimeout(m)}},l.send(a?y?JSON.stringify(u.data):s:null),c&&(m=setTimeout((function(){f||(l.onreadystatechange=function(){},l.abort(),o(new Error("request timeout")))}),c))})).catch((function(t){throw e.error&&e.error(t),t}))};o.defaults={};var u=o;document.getElementById("j_btn").addEventListener("click",(function(){Object.assign(u.defaults,{headers:{"X-Device":"123123123"}}),u.before=function(e){console.log("before拦截，发送请求前执行：",e)},u.after=function(e){console.log("after拦截，数据返回前执行：",e)},u({url:"../data.json"}).then((function(e){console.log("请求成功"),console.log(e)}),(function(e){console.log("请求失败, 详细信息",e)}))}))}]);